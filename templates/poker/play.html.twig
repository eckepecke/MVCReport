{% extends 'base.html.twig' %}


{% block title %}Poker Project{% endblock %}


{% block body %}

    {# <h2>P1 {{ player1Hand }}</h2>
    <h2>P2 {{ player2Hand }}</h2>
    <h2>P3 {{ player3Hand }}</h2> #}
    <div class="table-three">

        {# Showdown view #}
        {% if showdown %}
{# //////////////////////////////////////////////// #}

            <div class="player-box-small">
                <h4> {{ opp_1_strength }}</h4>
            {#
            
                <img class="player-img" src="{{ asset('build/images/teddy.jpg') }}" alt="me"> #}
                <div class="card-box-small">
                {% if opp_1_active %}
                    {% for img in opponent1Hand %}
                        <img class="card-img-small" src="{{ asset('build/images/' ~ img) }}" alt="card">    
                    {% endfor %}
                {% endif %}

                </div>
                {# <h4 class="blind">{{teddy_pos}}</h4> #}
                <h3>{{opponent_1_stack}} USD</h3>
                <h4 class="blind">{{opp_1_pos}}</h4>
            </div>

{# //////////////////////////////////////////////// #}

            <div class="player-box-small">
                <h4> {{ opp_2_strength }}</h4>
            {#
            
                <img class="player-img" src="{{ asset('build/images/teddy.jpg') }}" alt="me"> #}
                <div class="card-box-small">
                {% if opp_2_active %}
                    {% for img in opponent2Hand %}
                        <img class="card-img-small" src="{{ asset('build/images/' ~ img) }}" alt="card">    
                    {% endfor %}
                {% endif %}

                </div>
                {# <h4 class="blind">{{teddy_pos}}</h4> #}
                <h3>{{opponent_2_stack}} USD</h3>
                <h4 class="blind">{{opp_2_pos}}</h4>
            </div>

{# //////////////////////////////////////////////// #}

                <div class="board-box">
                    {% for img in board %}
                        <img class="community-card" src="{{ asset('build/images/' ~ img) }}" alt="card">
                    {% endfor %}
                </div>

                <div class="pot-box">
                    <h3>{{ winner }} takes the {{ pot }} pot </h3>
                </div>

{# //////////////////////////////////////////////// #}

                <h4>{{hero_strength}}</h4>
                <div class="player-box">

                    <div class="card-box">
                    {% for img in hero_hand %}
                        <img class="card-img" src="{{ asset('build/images/' ~ img) }}" alt="card">    {% endfor %}
                    </div>
                <h4 class="blind">{{hero_pos}}</h4>
                </div>
                <h3>{{hero_stack}} USD</h3>

                <div class="options-box">
                <form method="post" action="{{ path('poker_play') }}">
                    <input type="hidden" name="action" value="next">
                    <input type="submit" value="Next Hand" class="fold-button">
                </form>

                </div>
{# //////////////////////////////////////////////// #}

            </div>
        {% endif %}
        {% if not showdown %}

        <div class="opponents-box">
            <div class="player-box-small">
                <h4> {{ opp_1_last_action }}</h4>

            {% if opponent1Bet != 0 %}
                <h4>{{ opponent1Bet }}</h4>
            {% endif %}
            {# 
                <img class="player-img" src="{{ asset('build/images/teddy.jpg') }}" alt="me"> #}
                <div class="card-box-small">
                {% if opp_1_active %}
                    {% for img in opponent1Hand %}
                        <img class="card-img-small" src="{{ asset('build/images/' ~ img) }}" alt="card">    
                    {% endfor %}
                {% endif %}

                </div>
                {# <h4 class="blind">{{teddy_pos}}</h4> #}
                <h3>{{opponent_1_stack}} USD</h3>
                <h4 class="blind">{{opp_1_pos}}</h4>
            </div>



            <div class="player-box-small">
                <h4> {{ opp_2_last_action }}</h4>

            {% if opponent2Bet != 0 %}
                <h4>{{ opponent2Bet }}</h4>
            {% endif %}
            {#
            
                <img class="player-img" src="{{ asset('build/images/teddy.jpg') }}" alt="me"> #}
                <div class="card-box-small">
                {% if opp_2_active %}
                    {% for img in opponent2Hand %}
                        <img class="card-img-small" src="{{ asset('build/images/' ~ img) }}" alt="card">    
                    {% endfor %}
                {% endif %}

                </div>
                {# <h4 class="blind">{{teddy_pos}}</h4> #}
                <h3>{{opponent_2_stack}} USD</h3>
                <h4 class="blind">{{opp_2_pos}}</h4>
            </div>


        </div>

        <div class="board-box">
            {% for img in board %}
                <img class="community-card" src="{{ asset('build/images/' ~ img) }}" alt="card">
            {% endfor %}
        </div>
            <div class="pot-box">
                <h3>{{ pot }}dollars is in the pot</h3>
            </div>

        <div class="hero-box">
            <h4> {{ hero_last_action }}</h4>

            {% if heroBet != 0 %}
                <h4>{{ heroBet }}</h4>
            {% endif %}
        {# 
            <img class="player-img" src="{{ asset('build/images/teddy.jpg') }}" alt="me"> #}
            <div class="card-box-small">
            {% for img in hero_hand %}
                <img class="card-img-small" src="{{ asset('build/images/' ~ img) }}" alt="card">    
            {% endfor %}
            </div>
            {# <h4 class="blind">{{teddy_pos}}</h4> #}
            <h3>{{hero_stack}} USD</h3>
            <h4 class="blind">{{hero_pos}}</h4>
        </div>




        <div class="options-box">
        {% if hero_active != 0 and new_hand == false %}

                    <!-- Fold Button -->
                <form method="post" action="{{ path('poker_play') }}">
                    <input type="hidden" name="action" value="fold">
                    <input type="submit" value="Fold" class="fold-button">
                </form>

                {# Call Button #}
                {% if price == 0 %}
                    <form method="post" action="{{ path('poker_play') }}">
                        <input type="hidden" name="action" value="check">
                        <input type="submit" value="Check" class="call-button">
                    </form>
                {% else %}
                    <form method="post" action="{{ path('poker_play') }}">
                        <input type="hidden" name="action" value="call">
                        <input type="submit" value="Call {{ price }}" class="call-button">
                    </form>
                {% endif %}

                    <!-- Bet/Raise Button with Number Input -->
                    <form method="post" action="">
                        <button type="submit" name="bet_button" class="raise-button"
                                onClick="this.form.action='{{ path('poker_play') }}';">Bet/Raise</button>
                        <input type="number" name="bet" value="0" min={{min_raise}} class="bet-input">
                    </form>
            {% else %}
                <form method="post" action="{{ path('poker_play') }}">
                    <input type="hidden" name="action" value="next">
                    <input type="submit" value="Next Hand" class="fold-button">
                </form>
        {% endif %}

            </div>
        {% endif %}





    </div>


{% endblock %}